<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Palantir Blocked</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --accent: #ff6b00;
      --accent-dim: #cc5500;
      --accent-light: #ff8533;
    }

    body.blueberry { --accent: #4a90d9; --accent-dim: #3a7bc8; --accent-light: #6ba3e0; }
    body.acai { --accent: #9b59b6; --accent-dim: #8e44ad; --accent-light: #af7ac5; }
    body.emerald { --accent: #2ecc71; --accent-dim: #27ae60; --accent-light: #58d68d; }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', Roboto, sans-serif;
      background: #0d0d0d;
      color: #ffffff;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 20px;
      overflow: hidden;
      position: relative;
    }

    /* Light mode */
    body.light {
      background: #ffffff;
      color: #333333;
    }

    /* Animated glow effects */
    .glow {
      position: absolute;
      border-radius: 50%;
      filter: blur(120px);
      opacity: 0.15;
      pointer-events: none;
    }

    .glow-1 {
      width: 600px;
      height: 600px;
      background: var(--accent);
      top: -200px;
      right: -100px;
      animation: drift1 25s ease-in-out infinite;
    }

    .glow-2 {
      width: 400px;
      height: 400px;
      background: var(--accent-light);
      bottom: -150px;
      left: -100px;
      animation: drift2 30s ease-in-out infinite;
    }

    .glow-3 {
      width: 300px;
      height: 300px;
      background: var(--accent);
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      opacity: 0.08;
      animation: pulse 20s ease-in-out infinite;
    }

    /* Light mode glow effects */
    body.light .glow-1 {
      opacity: 0.4;
    }

    body.light .glow-2 {
      opacity: 0.4;
    }

    body.light .glow-3 {
      opacity: 0.3;
    }

    @keyframes drift1 {
      0%, 100% {
        transform: translate(0, 0) scale(1);
        opacity: 0.15;
      }
      25% {
        transform: translate(-80px, 60px) scale(1.1);
        opacity: 0.12;
      }
      50% {
        transform: translate(-40px, 100px) scale(0.95);
        opacity: 0.18;
      }
      75% {
        transform: translate(40px, 40px) scale(1.05);
        opacity: 0.13;
      }
    }

    @keyframes drift2 {
      0%, 100% {
        transform: translate(0, 0) scale(1);
        opacity: 0.15;
      }
      33% {
        transform: translate(100px, -60px) scale(1.15);
        opacity: 0.12;
      }
      66% {
        transform: translate(50px, -100px) scale(0.9);
        opacity: 0.17;
      }
    }

    @keyframes pulse {
      0%, 100% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 0.08;
      }
      50% {
        transform: translate(-50%, -50%) scale(1.3);
        opacity: 0.05;
      }
    }

    .error-container {
      position: relative;
      z-index: 1;
      max-width: 450px;
    }

    .kitty {
      width: 150px;
      height: auto;
      margin-bottom: 24px;
      animation: wiggle 2s ease-in-out infinite;
    }

    @keyframes wiggle {
      0%, 100% { transform: rotate(-3deg); }
      50% { transform: rotate(3deg); }
    }

    .message {
      font-size: 24px;
      font-weight: 600;
      color: var(--accent);
      margin-bottom: 10px;
    }

    .submessage {
      font-size: 16px;
      color: #888888;
      margin-bottom: 24px;
    }

    body.light .submessage {
      color: #666666;
    }

    .warning {
      margin-top: 16px;
      padding: 16px;
      background: rgba(255, 107, 0, 0.1);
      border: 1px solid rgba(255, 107, 0, 0.3);
      border-radius: 8px;
      font-size: 14px;
      color: #ccc;
    }

    body.light .warning {
      background: rgba(255, 107, 0, 0.05);
      color: #666;
    }

    .home-btn {
      margin-top: 24px;
      padding: 12px 30px;
      background: var(--accent);
      border: none;
      border-radius: 8px;
      color: white;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.15s ease;
    }

    .home-btn:hover {
      background: var(--accent-dim);
      transform: scale(1.02);
    }

    .proceed-btn {
      margin-top: 12px;
      padding: 12px 30px;
      background: transparent;
      border: 1px solid var(--accent);
      border-radius: 8px;
      color: var(--accent);
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.15s ease;
    }

    .proceed-btn:hover {
      background: var(--accent);
      color: white;
      transform: scale(1.02);
    }

    .learn-more {
      margin-top: 16px;
      font-size: 13px;
      color: #555555;
      cursor: pointer;
      text-decoration: underline;
    }

    body.light .learn-more {
      color: #888888;
    }

    /* Hide blobs for emerald theme - show Matrix instead */
    body.emerald .glow {
      display: none;
    }

    /* Matrix rain canvas */
    #matrix-canvas {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      opacity: 0;
      filter: blur(0.5px);
      transition: opacity 0.5s ease;
    }

    body.emerald #matrix-canvas {
      opacity: 0.18;
      filter: blur(0.5px);
    }

    /* CRT Effect for Emerald theme */
    .crt-overlay {
      display: none;
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 0;
    }

    body.emerald .crt-overlay {
      display: block;
    }

    .crt-overlay::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: repeating-linear-gradient(
        0deg,
        rgba(0, 0, 0, 0.15),
        rgba(0, 0, 0, 0.15) 1px,
        transparent 1px,
        transparent 2px
      );
      pointer-events: none;
    }

    .crt-overlay::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(
        ellipse at center,
        transparent 0%,
        transparent 50%,
        rgba(0, 0, 0, 0.4) 100%
      );
      pointer-events: none;
      animation: crt-flicker 0.1s infinite;
    }

    @keyframes crt-flicker {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.98; }
    }
  </style>
</head>
<body>
  <canvas id="matrix-canvas"></canvas>
  <div class="crt-overlay"></div>
  <div class="glow glow-1"></div>
  <div class="glow glow-2"></div>
  <div class="glow glow-3"></div>

  <div class="error-container">
    <img src="../assets/sahnap-cat.gif" alt="crying kitty" class="kitty">
    <div class="message">bruh are we fr</div>
    <div class="submessage">allllright proceed if you want to but I can't protect you past here.</div>
    <div class="warning">
      <p><strong>Warning:</strong> This site may compromise your privacy and tracking protection.</p>
    </div>
    <button class="home-btn" id="home-btn">Go Home</button>
    <button class="proceed-btn" id="proceed-btn">Proceed Anyway</button>
    <div class="learn-more" id="learn-more">this is a joke lol</div>
  </div>

  <script>
    const allThemeClasses = ['light', 'blueberry', 'acai', 'emerald'];

    // Matrix rain effect (copied from error.html)
    const canvas = document.getElementById('matrix-canvas');
    const ctx = canvas.getContext('2d');
    let matrixAnimationId = null;
    let drops = [];
    let active = [];

    const fontSize = 14;
    const trailLength = 20;
    const chars = '„Ç¢„Ç§„Ç¶„Ç®„Ç™„Ç´„Ç≠„ÇØ„Ç±„Ç≥„Çµ„Ç∑„Çπ„Çª„ÇΩ„Çø„ÉÅ„ÉÑ„ÉÜ„Éà„Éä„Éã„Éå„Éç„Éé„Éè„Éí„Éï„Éò„Éõ„Éû„Éü„É†„É°„É¢„É§„É¶„É®„É©„É™„É´„É¨„É≠„ÉØ„É≤„É≥0123456789';

    function initMatrix() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;

      const columnCount = Math.floor(canvas.width / fontSize);

      const newDrops = [];
      for (let i = 0; i < columnCount; i++) {
        if (i % 3 !== 0) continue;

        newDrops.push({
          x: i * fontSize,
          y: Math.random() * -50,
          speed: 0.3 + Math.random() * 0.4,
          trail: []
        });
      }

      drops = newDrops;
    }

    function getChar() {
      return chars[Math.floor(Math.random() * chars.length)];
    }

    function drawMatrix() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.font = `${fontSize}px monospace`;

      for (let i = 0; i < drops.length; i++) {
        const drop = drops[i];
        const y = Math.floor(drop.y) * fontSize;

        drop.trail.push({ y: y, char: getChar() });

        if (drop.trail.length > trailLength) {
          drop.trail.shift();
        }

        for (let j = 0; j < drop.trail.length; j++) {
          const t = drop.trail[j];
          const opacity = (j + 1) / drop.trail.length;

          if (j === drop.trail.length - 1) {
            ctx.fillStyle = `rgba(200, 255, 200, ${opacity})`;
          } else {
            ctx.fillStyle = `rgba(34, 197, 94, ${opacity * 0.8})`;
          }
          ctx.fillText(t.char, drop.x, t.y);
        }

        drop.y += drop.speed;

        if (drop.trail.length > 0 && drop.trail[0].y > canvas.height + fontSize) {
          drop.y = Math.random() * -30;
          drop.trail = [];
        }
      }

      matrixAnimationId = requestAnimationFrame(drawMatrix);
    }

    function startMatrix() {
      if (!matrixAnimationId) {
        initMatrix();
        drawMatrix();
      }
    }

    function stopMatrix() {
      if (matrixAnimationId) {
        cancelAnimationFrame(matrixAnimationId);
        matrixAnimationId = null;
        ctx.clearRect(0, 0, canvas.width, canvas.height);
      }
    }

    window.addEventListener('resize', () => {
      if (document.body.classList.contains('emerald')) {
        if (canvas.width !== window.innerWidth || canvas.height !== window.innerHeight) {
          initMatrix();
        }
      }
    });

    function applyTheme(theme) {
      allThemeClasses.forEach(cls => document.body.classList.remove(cls));
      if (theme !== 'dark') {
        document.body.classList.add(theme);
      } else {
        document.body.classList.remove('light', 'blueberry', 'acai', 'emerald');
      }

      if (theme === 'emerald') {
        startMatrix();
      } else {
        stopMatrix();
      }

      document.body.style.backgroundColor = theme === 'light' ? '#ffffff' : '#0d0d0d';
    }

    // Check for theme preference in localStorage
    const savedTheme = localStorage.getItem('vitamin-theme') || 'dark';
    applyTheme(savedTheme);

    // Listen for theme changes from main process
    if (window.chrome && window.chrome.ipcRenderer) {
      window.chrome.ipcRenderer.on('theme-change', (event, theme) => {
        applyTheme(theme);
        localStorage.setItem('vitamin-theme', theme);
      });
    }

    // Parse Palantir info from URL hash
    function getPalantirInfo() {
      try {
        const hash = window.location.hash.slice(1);
        if (hash) {
          return JSON.parse(decodeURIComponent(hash));
        }
      } catch (e) {
        console.error('Failed to parse Palantir info:', e);
      }
      return null;
    }

    // Apply theme when DOM is ready
    document.addEventListener('DOMContentLoaded', () => {
      const savedTheme = localStorage.getItem('vitamin-theme') || 'dark';
      applyTheme(savedTheme);
    });

    // Proceed button functionality
    document.getElementById('proceed-btn').addEventListener('click', () => {
      const palantirInfo = getPalantirInfo();
      if (palantirInfo && palantirInfo.url) {
        // Send IPC to main process to proceed to Palantir
        if (window.chrome && window.chrome.ipcRenderer) {
          window.chrome.ipcRenderer.send('proceed-palantir-url', palantirInfo.url);
        } else {
          // Fallback: just try to navigate
          window.location.href = palantirInfo.url;
        }
      }
    });

    // Go home button
    document.getElementById('home-btn').addEventListener('click', () => {
      window.location.href = 'start.html';
    });

    // Learn more (joke)
    document.getElementById('learn-more').addEventListener('click', () => {
      alert('No but seriously, Palantir is a real company that makes data analysis software used by governments and corporations. This warning is just for fun! üò∏');
    });
  </script>
</body>
</html>